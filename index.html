<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport"  content="width=device-width  initial-scale=1 user-scalable=no" >
    <title>音乐台</title>
    <link rel="stylesheet" href="./css/index.css">
</head>
<body>
<div id="wrap">
     <header id="header">
        <!--上半部分-->
        <div id="headerTop">
            <h1 id="logo">
                <a href="javascript:;">
                    <img src="./img/logo.png" alt="">
                </a>
            </h1>
            <a href="javascript:;" id="menuBtn" class="menuBtn_clos"></a>
            <!--css雪碧图，精灵图 ，图片整合技术-->
            <div id="nav">
                <a href="javascript:;" id="searchBtn" >搜索</a>
                <a href="javascript:;">登录</a>
                <a href="javascript:;">注册</a>
            </div>
        </div>
        <!--下半部分-->
        <form id="search">
            <input type="text"  placeholder="请输入搜索内容。。。">
            <input type="submit" value="搜索"  >
        </form>
        <ul id="mask" style="display: none">
            <li>
                <a href="javascript:;">首页</a>
            </li>
            <li>
                <a href="javascript:;">MV</a>
            </li>
            <li>
                <a href="javascript:;">悦单</a>
            </li>
            <li>
                <a href="javascript:;">V榜</a>
            </li>
            <li>
                <a href="javascript:;">音悦</a>
            </li>
            <li>
                <a href="javascript:;">商城</a>
            </li>
            <li>
                <a href="javascript:;">节目</a>
            </li>
            <li>
                <a href="javascript:;">饭团</a>
            </li>
            <li>
                <a href="javascript:;">资讯</a>
            </li>
            <li>
                <a href="javascript:;">我的家</a>
            </li>
            <li>
                <a href="javascript:;">APP下载</a>
            </li>
            <li>
                <a href="javascript:;">热门应用</a>
            </li>
        </ul>


    </header>
     <div id="content">
          <!--导航区-->
          <nav  id="navs">
              <ul id="navsList" >
                  <li class="active">
                      <a href="javascript:;">首页</a>
                  </li>
                  <li>
                      <a href="javascript:;">MV</a>
                  </li>
                  <li>
                      <a href="javascript:;">悦单</a>
                  </li>
                  <li>
                      <a href="javascript:;">V榜</a>
                  </li>
                  <li>
                      <a href="javascript:;">音悦</a>
                  </li>
                  <li>
                      <a href="javascript:;">商城</a>
                  </li>
                  <li>
                      <a href="javascript:;">节目</a>
                  </li>
                  <li>
                      <a href="javascript:;">饭团</a>
                  </li>
                  <li>
                      <a href="javascript:;">资讯</a>
                  </li>
                  <li>
                      <a href="javascript:;">我的家</a>
                  </li>
                  <li>
                      <a href="javascript:;">APP下载</a>
                  </li>
                  <li>
                      <a href="javascript:;">热门应用</a>
                  </li>
              </ul>
          </nav>
          <!--轮播图-->
          <div id="banner_wrap">
             <ul id="banner_list">
                 <li>
                     <a href="javascript:;">
                         <img src="./img/1.jpg" alt="">
                     </a>
                 </li>
                 <li>
                     <a href="javascript:;">
                         <img src="./img/2.jpg" alt="">
                     </a>
                 </li>
                 <li>
                     <a href="javascript:;">
                         <img src="./img/3.jpg" alt="">
                     </a>
                 </li>
                 <li>
                     <a href="javascript:;">
                         <img src="./img/4.jpg" alt="">
                     </a>
                 </li>
                 <li>
                     <a href="javascript:;">
                         <img src="./img/5.jpg" alt="">
                     </a>
                 </li>
             </ul>
             <div id="banner_navs">
                 <span class="active"></span>
                 <span></span>
                 <span></span>
                 <span></span>
                 <span></span>
             </div>

         </div>
          <!--tab区域-->
          <section  class="tab">
              <header class="tab_header">
                   <h2>MV首播</h2>
                   <a href="javascript:;">更多&gt</a>
              </header>
              <nav class="tab_nav">
                  <a href="javascript:;">全部</a>
                  <a href="javascript:;">内地</a>
                  <a href="javascript:;">港台</a>
                  <a href="javascript:;">欧美</a>
                  <a href="javascript:;">韩国</a>
                  <a href="javascript:;">日本</a>
                  <span></span>
              </nav>
              <div class="tab_wrap">
                  <ul  class="tab_loading"></ul>
                  <ul class="tab_list">
                      <li>
                          <a href="javascript:;">
                               <img src="./img/a.jpg" alt="">
                               <span>君に贈る花がない君に贈る花がない君に贈る花がない君に贈る花がない君に贈る花がない君に贈る花がない</span>
                          </a>
                          <div class="ice">
                              <div class="ice_left">
                                  <span class="ice_pic"></span>
                                  <span>9167</span>
                              </div>
                              <div class="ice_right">
                                  <span class="ice_pic"></span>
                                  <span>6</span>
                              </div>
                          </div>
                      </li>
                      <li>
                          <a href="javascript:;">
                              <img src="./img/a.jpg" alt="">
                              <span>君に贈る花</span>
                          </a>
                          <div class="ice">
                              <div class="ice_left">
                                  <span class="ice_pic"></span>
                                  <span>9167</span>
                              </div>
                              <div class="ice_right">
                                  <span class="ice_pic"></span>
                                  <span>6</span>
                              </div>
                          </div>
                      </li>
                      <li>
                          <a href="javascript:;">
                              <img src="./img/a.jpg" alt="">
                              <span>君に贈る花がない</span>
                          </a>
                          <div class="ice">
                              <div class="ice_left">
                                  <span class="ice_pic"></span>
                                  <span>9167</span>
                              </div>
                              <div class="ice_right">
                                  <span class="ice_pic"></span>
                                  <span>6</span>
                              </div>
                          </div>
                      </li>
                      <li>
                          <a href="javascript:;">
                              <img src="./img/a.jpg" alt="">
                              <span>君に贈る花がない</span>
                          </a>
                          <div class="ice">
                              <div class="ice_left">
                                  <span class="ice_pic"></span>
                                  <span>9167</span>
                              </div>
                              <div class="ice_right">
                                  <span class="ice_pic"></span>
                                  <span>6</span>
                              </div>
                          </div>
                      </li>
                      <li>
                          <a href="javascript:;">
                              <img src="./img/a.jpg" alt="">
                              <span>君に贈る花がない</span>
                          </a>
                          <div class="ice">
                              <div class="ice_left">
                                  <span class="ice_pic"></span>
                                  <span>9167</span>
                              </div>
                              <div class="ice_right">
                                  <span class="ice_pic"></span>
                                  <span>6</span>
                              </div>
                          </div>
                      </li>
                      <li>
                          <a href="javascript:;">
                              <img src="./img/a.jpg" alt="">
                              <span>君に贈る花がない</span>
                          </a>
                          <div class="ice">
                              <div class="ice_left">
                                  <span class="ice_pic"></span>
                                  <span>9167</span>
                              </div>
                              <div class="ice_right">
                                  <span class="ice_pic"></span>
                                  <span>6</span>
                              </div>
                          </div>
                      </li>
                  </ul>
                  <ul class="tab_loading"></ul>
              </div>
          </section>
          <section  class="tab">
             <header class="tab_header">
                 <h2>MV首播</h2>
                 <a href="javascript:;">更多&gt</a>
             </header>
             <nav class="tab_nav">
                 <a href="javascript:;">全部</a>
                 <a href="javascript:;">内地</a>
                 <a href="javascript:;">港台</a>
                 <a href="javascript:;">欧美</a>
                 <a href="javascript:;">韩国</a>
                 <a href="javascript:;">日本</a>
                 <span></span>
             </nav>
             <div class="tab_wrap">
                 <ul  class="tab_loading"></ul>
                 <ul class="tab_list">
                     <li>
                         <a href="javascript:;">
                             <img src="./img/a.jpg" alt="">
                             <span>君に贈る花がない君に贈る花がない君に贈る花がない君に贈る花がない君に贈る花がない君に贈る花がない</span>
                         </a>
                         <div class="ice">
                             <div class="ice_left">
                                 <span class="ice_pic"></span>
                                 <span>9167</span>
                             </div>
                             <div class="ice_right">
                                 <span class="ice_pic"></span>
                                 <span>6</span>
                             </div>
                         </div>
                     </li>
                     <li>
                         <a href="javascript:;">
                             <img src="./img/a.jpg" alt="">
                             <span>君に贈る花</span>
                         </a>
                         <div class="ice">
                             <div class="ice_left">
                                 <span class="ice_pic"></span>
                                 <span>9167</span>
                             </div>
                             <div class="ice_right">
                                 <span class="ice_pic"></span>
                                 <span>6</span>
                             </div>
                         </div>
                     </li>
                     <li>
                         <a href="javascript:;">
                             <img src="./img/a.jpg" alt="">
                             <span>君に贈る花がない</span>
                         </a>
                         <div class="ice">
                             <div class="ice_left">
                                 <span class="ice_pic"></span>
                                 <span>9167</span>
                             </div>
                             <div class="ice_right">
                                 <span class="ice_pic"></span>
                                 <span>6</span>
                             </div>
                         </div>
                     </li>
                     <li>
                         <a href="javascript:;">
                             <img src="./img/a.jpg" alt="">
                             <span>君に贈る花がない</span>
                         </a>
                         <div class="ice">
                             <div class="ice_left">
                                 <span class="ice_pic"></span>
                                 <span>9167</span>
                             </div>
                             <div class="ice_right">
                                 <span class="ice_pic"></span>
                                 <span>6</span>
                             </div>
                         </div>
                     </li>
                     <li>
                         <a href="javascript:;">
                             <img src="./img/a.jpg" alt="">
                             <span>君に贈る花がない</span>
                         </a>
                         <div class="ice">
                             <div class="ice_left">
                                 <span class="ice_pic"></span>
                                 <span>9167</span>
                             </div>
                             <div class="ice_right">
                                 <span class="ice_pic"></span>
                                 <span>6</span>
                             </div>
                         </div>
                     </li>
                     <li>
                         <a href="javascript:;">
                             <img src="./img/a.jpg" alt="">
                             <span>君に贈る花がない</span>
                         </a>
                         <div class="ice">
                             <div class="ice_left">
                                 <span class="ice_pic"></span>
                                 <span>9167</span>
                             </div>
                             <div class="ice_right">
                                 <span class="ice_pic"></span>
                                 <span>6</span>
                             </div>
                         </div>
                     </li>
                 </ul>
                 <ul class="tab_loading"></ul>
             </div>
         </section>
          <section  class="tab">
             <header class="tab_header">
                 <h2>MV首播</h2>
                 <a href="javascript:;">更多&gt</a>
             </header>
             <nav class="tab_nav">
                 <a href="javascript:;">全部</a>
                 <a href="javascript:;">内地</a>
                 <a href="javascript:;">港台</a>
                 <a href="javascript:;">欧美</a>
                 <a href="javascript:;">韩国</a>
                 <a href="javascript:;">日本</a>
                 <span></span>
             </nav>
             <div class="tab_wrap">
                 <ul  class="tab_loading"></ul>
                 <ul class="tab_list">
                     <li>
                         <a href="javascript:;">
                             <img src="./img/a.jpg" alt="">
                             <span>君に贈る花がない君に贈る花がない君に贈る花がない君に贈る花がない君に贈る花がない君に贈る花がない</span>
                         </a>
                         <div class="ice">
                             <div class="ice_left">
                                 <span class="ice_pic"></span>
                                 <span>9167</span>
                             </div>
                             <div class="ice_right">
                                 <span class="ice_pic"></span>
                                 <span>6</span>
                             </div>
                         </div>
                     </li>
                     <li>
                         <a href="javascript:;">
                             <img src="./img/a.jpg" alt="">
                             <span>君に贈る花</span>
                         </a>
                         <div class="ice">
                             <div class="ice_left">
                                 <span class="ice_pic"></span>
                                 <span>9167</span>
                             </div>
                             <div class="ice_right">
                                 <span class="ice_pic"></span>
                                 <span>6</span>
                             </div>
                         </div>
                     </li>
                     <li>
                         <a href="javascript:;">
                             <img src="./img/a.jpg" alt="">
                             <span>君に贈る花がない</span>
                         </a>
                         <div class="ice">
                             <div class="ice_left">
                                 <span class="ice_pic"></span>
                                 <span>9167</span>
                             </div>
                             <div class="ice_right">
                                 <span class="ice_pic"></span>
                                 <span>6</span>
                             </div>
                         </div>
                     </li>
                     <li>
                         <a href="javascript:;">
                             <img src="./img/a.jpg" alt="">
                             <span>君に贈る花がない</span>
                         </a>
                         <div class="ice">
                             <div class="ice_left">
                                 <span class="ice_pic"></span>
                                 <span>9167</span>
                             </div>
                             <div class="ice_right">
                                 <span class="ice_pic"></span>
                                 <span>6</span>
                             </div>
                         </div>
                     </li>
                     <li>
                         <a href="javascript:;">
                             <img src="./img/a.jpg" alt="">
                             <span>君に贈る花がない</span>
                         </a>
                         <div class="ice">
                             <div class="ice_left">
                                 <span class="ice_pic"></span>
                                 <span>9167</span>
                             </div>
                             <div class="ice_right">
                                 <span class="ice_pic"></span>
                                 <span>6</span>
                             </div>
                         </div>
                     </li>
                     <li>
                         <a href="javascript:;">
                             <img src="./img/a.jpg" alt="">
                             <span>君に贈る花がない</span>
                         </a>
                         <div class="ice">
                             <div class="ice_left">
                                 <span class="ice_pic"></span>
                                 <span>9167</span>
                             </div>
                             <div class="ice_right">
                                 <span class="ice_pic"></span>
                                 <span>6</span>
                             </div>
                         </div>
                     </li>
                 </ul>
                 <ul class="tab_loading"></ul>
             </div>
         </section>
          <section  class="tab">
             <header class="tab_header">
                 <h2>MV首播</h2>
                 <a href="javascript:;">更多&gt</a>
             </header>
             <nav class="tab_nav">
                 <a href="javascript:;">全部</a>
                 <a href="javascript:;">内地</a>
                 <a href="javascript:;">港台</a>
                 <a href="javascript:;">欧美</a>
                 <a href="javascript:;">韩国</a>
                 <a href="javascript:;">日本</a>
                 <span></span>
             </nav>
             <div class="tab_wrap">
                 <ul  class="tab_loading"></ul>
                 <ul class="tab_list">
                     <li>
                         <a href="javascript:;">
                             <img src="./img/a.jpg" alt="">
                             <span>君に贈る花がない君に贈る花がない君に贈る花がない君に贈る花がない君に贈る花がない君に贈る花がない</span>
                         </a>
                         <div class="ice">
                             <div class="ice_left">
                                 <span class="ice_pic"></span>
                                 <span>9167</span>
                             </div>
                             <div class="ice_right">
                                 <span class="ice_pic"></span>
                                 <span>6</span>
                             </div>
                         </div>
                     </li>
                     <li>
                         <a href="javascript:;">
                             <img src="./img/a.jpg" alt="">
                             <span>君に贈る花</span>
                         </a>
                         <div class="ice">
                             <div class="ice_left">
                                 <span class="ice_pic"></span>
                                 <span>9167</span>
                             </div>
                             <div class="ice_right">
                                 <span class="ice_pic"></span>
                                 <span>6</span>
                             </div>
                         </div>
                     </li>
                     <li>
                         <a href="javascript:;">
                             <img src="./img/a.jpg" alt="">
                             <span>君に贈る花がない</span>
                         </a>
                         <div class="ice">
                             <div class="ice_left">
                                 <span class="ice_pic"></span>
                                 <span>9167</span>
                             </div>
                             <div class="ice_right">
                                 <span class="ice_pic"></span>
                                 <span>6</span>
                             </div>
                         </div>
                     </li>
                     <li>
                         <a href="javascript:;">
                             <img src="./img/a.jpg" alt="">
                             <span>君に贈る花がない</span>
                         </a>
                         <div class="ice">
                             <div class="ice_left">
                                 <span class="ice_pic"></span>
                                 <span>9167</span>
                             </div>
                             <div class="ice_right">
                                 <span class="ice_pic"></span>
                                 <span>6</span>
                             </div>
                         </div>
                     </li>
                     <li>
                         <a href="javascript:;">
                             <img src="./img/a.jpg" alt="">
                             <span>君に贈る花がない</span>
                         </a>
                         <div class="ice">
                             <div class="ice_left">
                                 <span class="ice_pic"></span>
                                 <span>9167</span>
                             </div>
                             <div class="ice_right">
                                 <span class="ice_pic"></span>
                                 <span>6</span>
                             </div>
                         </div>
                     </li>
                     <li>
                         <a href="javascript:;">
                             <img src="./img/a.jpg" alt="">
                             <span>君に贈る花がない</span>
                         </a>
                         <div class="ice">
                             <div class="ice_left">
                                 <span class="ice_pic"></span>
                                 <span>9167</span>
                             </div>
                             <div class="ice_right">
                                 <span class="ice_pic"></span>
                                 <span>6</span>
                             </div>
                         </div>
                     </li>
                 </ul>
                 <ul class="tab_loading"></ul>
             </div>
         </section>
     </div>
     <div id="scroll_bar">

     </div>
</div>


</body>
<script  src="transformCss.js"></script>
<script src="scroll.js"></script>
<script  type="text/javascript">
//    取消浏览器默认行为
//     document.addEventListener("touchstart",function (event) {
//           event.preventDefault()
//     });
     //rem适配
 (function () {

           var  styleN = document.createElement("style");
           var width = document.documentElement.clientWidth/16;
           styleN.innerHTML = 'html{font-size:'+width+'px!important}'
           document.head.appendChild(styleN)
       })();
// 自动轮播图

window.onload =function () {
    banner();
    changeInput();
    changeMenu();
    drag();
    changeColor();
    tab()
    scroll(wrap,callback)
}

//loading 滑动
function tab() {
    var  tab_wrap = document.querySelectorAll(".tab_wrap");
    var  tab_nav = document.querySelectorAll(".tab_nav");
    var  translateX =tab_nav[0].offsetWidth;
     for(var i =0;i<tab_wrap.length;i++){
        move(tab_wrap[i],tab_nav[i])
     }
   function  move(tab_wrap,tab_nav) {
       transformCss(tab_wrap,'translateX',-translateX);
       transformCss(tab_wrap,'translateZ',0.01)
       var elementX = 0;
       var  startX = 0;
       var  startY = 0
       var  isload = 0;
       var isX = true;
       var isFirst = true;

       var loadings = tab_wrap.querySelectorAll('.tab_loading');
       //小绿条a的下标`
       var now = 0;
       var smallG = tab_nav.querySelector('.tab_nav span');
       transformCss(smallG,'translateZ',0.01)
       var aNodes = tab_nav.querySelectorAll('.tab_nav a');
       console.log(aNodes)
       tab_wrap.addEventListener("touchstart",function(event) {
           var touch = event.changedTouches[0];
            if(isload){
                return;
            }
           tab_wrap.style.transition ='none';
           elementX = transformCss(this,'translateX');
           startX = touch.clientX
           startY = touch.clientY;
           isX = true;
          isFirst = true;

       });
       tab_wrap.addEventListener("touchmove",function(event) {
           if(!isX){
               return;
           }
           if(isload){
               return;
           }
           var touch = event.changedTouches[0];


           var  nowX = touch.clientX;
           var  disX = nowX -startX;
           var   nowY = touch.clientY
           var   disY = nowY -startY
           if(isFirst) {
               if(Math.abs(disY)>Math.abs(disX)){
                  isX  = false

           }
           isFirst = false;
           }




           transformCss(this,'translateX',elementX+disX);
           if(Math.abs(disX)>translateX/2){
               var  target = disX>0?0:-2*translateX;
               tab_wrap.style.transition ='0.5s';
               transformCss(tab_wrap,'translateX',target);
               isload =true;
               if(disX<0){
                   now= now+1
               }else{
                   now = now -1
               }
               if(now>5){
                   now = 0
               }else if(now<0){
                   now =5
               }

//                console.log(now)；
                 smallG.style.transition = '0.5s'

                transformCss(smallG,'translateX',aNodes[now].offsetLeft)

               tab_wrap.addEventListener("transitionEnd",transitionEnd)
               tab_wrap.addEventListener("webkitTransitionEnd",transitionEnd)
               function  transitionEnd() {
                    tab_wrap.removeEventListener("transitionEnd",transitionEnd);
                    tab_wrap.removeEventListener("webkitTransitionEnd",transitionEnd)
                    for(var i= 0;i<loadings.length;i++){
                        loadings[i].style.opacity ='1'
                    }
                    setTimeout(function () {
                          tab_wrap.style.transition ='none' ;


                          transformCss(tab_wrap,'translateX',-translateX)

                          isload =false;
                        for(var i= 0;i<loadings.length;i++){
                            loadings[i].style.opacity ='0'
                        }
                    },3000);
               }
           }
       });
       tab_wrap.addEventListener("touchend",function (event) {
           if(isload){
               return;
           }
           var touch = event.changedTouches[0];
            var nowX = touch.clientX;
            var disX = nowX -startX;
           if(Math.abs(disX)<translateX/2){
               tab_wrap.style.transition ='0.5s';

         transformCss(tab_wrap,'translateX',-translateX)
           }
       })




   }





}

function  banner() {

    var spanNodes = document.querySelectorAll("#banner_navs span")
    var wrap = document.getElementById("banner_wrap")
    var list = document.getElementById("banner_list")
    transformCss(list,'translateZ',0.01)
    list.innerHTML += list.innerHTML
    var liNodes = document.querySelectorAll("#banner_list li")
    var styleN = document.createElement("style")
    var cssText = '#banner_list{width:' + liNodes.length + '00%}'
    cssText += '#banner_list li{width:' + (1 / liNodes.length * 100) + '%}'
    cssText += '#banner_wrap{height:' + liNodes[0].offsetHeight + 'px}'
    styleN.innerHTML = cssText;
    document.head.appendChild(styleN)

    var elementX = 0;
    var startX = 0;
    var timer =0;
    var now = 0;
//           var disX =0
//           var  translateX =0;
    wrap.addEventListener("touchstart", function (event) {
        clearInterval(timer)
        list.style.transition = 'none';
        var left = transformCss(list, "translateX")
        var now = Math.round(-left / document.documentElement.clientWidth)

        if (now == 0) {
            now = spanNodes.length
        } else if (now == liNodes.length - 1) {
            now = spanNodes.length - 1
        }
        transformCss(list, 'translateX', -now * document.documentElement.clientWidth)

        var touch = event.changedTouches[0];
//               elementX = list.offsetLeft;
        startX = touch.clientX
//                elementX =translateX;
        elementX = transformCss(list, 'translateX')
    });
    wrap.addEventListener("touchmove", function (event) {
        var touch = event.changedTouches[0];
        var nowX = touch.clientX;
        var disX = nowX - startX
//               translateX = elementX+disX
//               list.style.transform = 'translateX('+translateX +'px)';
        transformCss(list, 'translateX', elementX + disX)
    });
    wrap.addEventListener("touchend", function (event) {
        event.preventDefault()

//               var left =list.offsetLeft;
//                   var left = translateX;
        var left = transformCss(list, "translateX")
//               if(disX<0){
//                now = Math.ceil(-left/document.documentElement.clientWidth)
//               }else{
//                   now = Math.floor(-left/document.documentElement.clientWidth)
//
//               }
        now = Math.round(-left / document.documentElement.clientWidth)
        if (now < 0) {
            now = 0
        } else if (now > liNodes.length - 1) {
            now = liNodes.length - 1
        }
        list.style.transition = '0.5s';
//               translateX = -now*document.documentElement.clientWidth;
//               list.style.transform = 'translateX('+translateX+'px)';
        transformCss(list, 'translateX', -now * document.documentElement.clientWidth)
        //同步小圆点
        for (var i = 0; i < spanNodes.length; i++) {
            spanNodes[i].className = ''
        }
        auto();
        spanNodes[now % spanNodes.length].className = 'active';
    });
    // 自动轮播图
//           var now = 0;
    auto();
    function  auto() {
        clearInterval(timer)
        timer = setInterval(function () {
            list.style.transition = 'none'
            if(now ==liNodes.length-1){
                now =spanNodes.length-1
            }
            transformCss(list, 'translateX', -now * document.documentElement.clientWidth)
            setTimeout(function () {
                now++;
                list.style.transition = '0.5s'
                transformCss(list, 'translateX', -now * document.documentElement.clientWidth)
                for (var i = 0; i < spanNodes.length; i++) {
                    spanNodes[i].className = ''
                }
                spanNodes[now % spanNodes.length].className = 'active';

            },20)

        },1500)
    }

}

// input 获得和失去焦点、

function changeInput() {
       var  inputNode = document.querySelector("#search [type='text']")
       inputNode.addEventListener("touchstart",function (event) {
           inputNode.focus()
           event.stopPropagation()

       });
       document.addEventListener("touchstart",function () {
           inputNode.blur()
       });

   }

//menuBtn菜单切换

function  changeMenu() {
    var menuBtn = document.getElementById("menuBtn")
    var  mask = document.getElementById("mask")
    menuBtn.addEventListener("touchstart",function () {
        if(menuBtn.className=='menuBtn_clos'){
            menuBtn.className ='menuBtn_open'
            mask.style.display = 'block'

        }else if(menuBtn.className=='menuBtn_open'){
            menuBtn.className ='menuBtn_clos'
            mask.style.display =  'none'
        }
        //取消冒泡
        event.stopPropagation()

    });
    document.addEventListener("touchstart",function () {
        if(menuBtn.className=='menuBtn_open'){
            menuBtn.className ='menuBtn_clos'
            mask.style.display = 'none'
        }

    })
    // 遮罩取消冒泡
    mask.addEventListener("touchstart",function (event) {

        event.stopPropagation()
    })
}

//导航拖拽

function  drag() {
    var  navs = document.getElementById("navs")
    var  navsList= document.getElementById("navsList");
    transformCss(navsList,'translateZ',0.01)
    var beginTime = 0;
    var beginValue = 0;
    var endTime = 0;
    var endValue = 0;
    var disTime = 0;
    var disValue= 0;

    //  元素初始位置
    var eleX = 0;
    //手指初始位置
    var startX =0;
    var isFirst = true;
    isX = true;
    navs.addEventListener("touchstart",function (event) {
        var touch = event.changedTouches[0];
        startX = touch.clientX
        eleX = transformCss(navsList,"translateX")
        beginTime = new Date().getTime()
        beginValue = eleX;
        disValue = 0;


    })
    navs.addEventListener("touchmove",function (event) {
        var touch = event.changedTouches[0];
        var nowX = touch.clientX
        var dis =  nowX -startX
        var minX = document.documentElement.clientWidth-navsList.offsetWidth
        transformCss(navsList,"translateX",eleX+dis)
        var translateX = eleX+dis;
        if(translateX>0){
            var scale = 1-translateX/document.documentElement.clientWidth
//           console.log(scale)
            translateX =translateX*scale
//           console.log(translateX)

        }else if(translateX<minX){
            var  over  = minX-translateX
            var scale = 1- over/document.documentElement.clientWidth
//              console.log(scale)
            translateX =  minX -over*scale
//            console.log(translateX)





        }
        transformCss(navsList,"translateX",translateX)
        endTime = new Date().getTime();
        endValue = translateX;
        disTime = endTime-beginTime;
        disValue = endValue -beginValue;
    });
    navs.addEventListener("touchend",function (event) {
        var touch = event.changedTouches[0];
        var speed = disValue/(endTime-beginTime)
        var minX = document.documentElement.clientWidth-navsList.offsetWidth
        var target = transformCss(navsList,"translateX")+speed*100
        var bezier = '';
//           console.log(speed);
        if(target>0){
            target = 0

            bezier = 'cubic-bezier(0,1.85,.81,1.71)'
        }else if (target<minX){
            target = minX
            bezier = 'cubic-bezier(0,1.85,.81,1.71)'
        }

        navsList.style.transition = '1s '+bezier
        transformCss(navsList,"translateX",target)

    })




}

//点击变色

function  changeColor() {
    var  Linodes = document.querySelectorAll("#navsList li")
    // 对li进行遍历
    for(var i=0;i<Linodes.length;i++){
        //误触解决
        Linodes[i].addEventListener("touchmove",function () {
            if(!this.isMove){
                this.isMove = true

            }


        });
        Linodes[i].addEventListener("touchend",function () {
            //对每个li绑定touchend，添加classname
            if(!this.isMove){
                for(var j=0;j<Linodes.length;j++){
                    Linodes[j].className = '';
                }
                this.className = 'active';

            }
            this.isMove = false;

        })




    }



}

//滚动条
var wrap = document.getElementById('wrap')
var content = document.getElementById("content");
var scroll_bar = document.getElementById('scroll_bar');

var scale = document.documentElement.clientHeight/content.clientHeight
scroll_bar.style.height = document.documentElement.clientHeight*scale +'px'


var  callback ={
    start:function () {
        scroll_bar.style.opacity = '1'
    } ,
    move:function () {
        //内容移动的距离
        var dis=transformCss(content,'translateY')
        //  滚动条移动的距离 dis*scale
        transformCss(scroll_bar,'translateY',-dis*scale)
        scroll_bar.style.opacity = '1'
    },
    end:function () {
        scroll_bar.style.opacity = '0'
    }
};



</script>

</html>